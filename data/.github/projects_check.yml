name: Check

on:
  push:
    branches:
      - master
  pull_request:
    types: [opened, synchronize]

  spellcheck:
    name: Spelling
    needs: changed
    if: ${{ needs.changed.outputs.data == 'true' || needs.changed.outputs.codespell == 'true' || needs.changed.outputs.changelog == 'true' || needs.changed.outputs.projects_check_config == 'true' }}
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
      with:
        ref: ${{ github.event.pull_request.head.sha }}
        show-progress: false
    - uses: codespell-project/actions-codespell@master
      with:
        builtin: clear,en-GB_to_en-US
        path: changelog data/
        #exclude_file: .codespell.exclude
        #ignore_words_file: .codespell.words.exclude